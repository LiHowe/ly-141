<Window x:Class="UI.Controls.InputDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        mc:Ignorable="d"
        Title="输入对话框"
        Height="250" Width="450"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize">

    <!-- 引用主题资源 -->
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Themes/Generic.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Border Background="{StaticResource BackgroundCardBrush}"
            BorderBrush="{StaticResource BorderBrush}"
            BorderThickness="1"
            CornerRadius="8"
            Margin="10">
        <Border.Effect>
            <DropShadowEffect Color="{StaticResource ShadowColor}"
                              BlurRadius="15"
                              ShadowDepth="5"
                              Opacity="0.3" />
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- 标题栏 -->
            <Border Grid.Row="0"
                    Background="#243b76"
                    CornerRadius="8,8,0,0"
                    Padding="10, 5">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!-- 标题 -->
                    <TextBlock x:Name="TitleTextBlock"
                               Grid.Column="1"
                               Text="输入对话框"
                               Foreground="{StaticResource TextOnPrimaryBrush}"
                               FontWeight="SemiBold"
                               VerticalAlignment="Center" />

                    <!-- 关闭按钮 -->
                    <Button x:Name="CloseButton"
                            Grid.Column="2"
                            hc:IconElement.Geometry="{StaticResource CloseGeometry}"
                            Style="{StaticResource CloseButtonStyle}"
                            Width="30" Height="30"
                            Foreground="{StaticResource TextOnPrimaryBrush}"
                            Click="CloseButton_Click" />
                </Grid>
            </Border>

            <!-- 内容区域 -->
            <StackPanel Grid.Row="1"
                        Margin="10"
                        Style="{StaticResource FormContainerStyle}">

                <!-- 提示信息 -->
                <TextBlock x:Name="PromptTextBlock"
                           Text="请输入内容："
                           Margin="0,0,0,10" />

                <!-- 输入字段 -->
                <StackPanel Style="{StaticResource FormFieldStyle}">

                    <TextBox x:Name="InputTextBox"
                             Height="60"
                             KeyDown="InputTextBox_KeyDown" />
                </StackPanel>

                <!-- 密码输入字段（可选） -->
                <StackPanel x:Name="PasswordPanel"
                            Style="{StaticResource FormFieldStyle}"
                            Visibility="Collapsed">
                    <Label Content="密码:"
                           Style="{StaticResource FormLabelStyle}" />
                    <PasswordBox x:Name="PasswordBox"
                                 Style="{StaticResource StandardPasswordBoxStyle}"
                                 KeyDown="PasswordBox_KeyDown" />
                </StackPanel>

                <!-- 验证信息 -->
                <TextBlock x:Name="ValidationTextBlock"
                           Foreground="{StaticResource ErrorBrush}"
                           Visibility="Collapsed"
                           Margin="0,5,0,0" />
            </StackPanel>

            <!-- 按钮区域 -->
            <Border Grid.Row="2"
                    Background="{StaticResource SurfaceVariantBrush}"
                    CornerRadius="0,0,8,8"
                    Padding="10">
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Right">
                    <Button x:Name="CancelButton"
                            Content="取消"
                            Margin="0,0,10,0"
                            Click="CancelButton_Click" />
                    <Button x:Name="OKButton"
                            Content="确定"
                            Style="{StaticResource ButtonPrimary}"
                            MinWidth="80"
                            Click="OKButton_Click" />
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>